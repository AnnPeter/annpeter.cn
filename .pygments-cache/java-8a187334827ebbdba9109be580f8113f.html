<div class="highlight"><pre><span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageState</span><span class="o">();</span> 	<span class="c1">//MEDIA_UNKNOWN:不能识别SD卡</span>
										<span class="c1">//MEDIA_REMOVED:没有SD卡</span>
										<span class="c1">//MEDIA_UNMOUNTED:SD卡存在但是没有挂载</span>
										<span class="c1">//MEDIA_CHECKING:SD卡正在准备</span>
										<span class="c1">//MEDIA_MOUNTED:SD卡已经挂载可用</span>
<span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageDirectory</span><span class="o">();</span> <span class="c1">//获取SD卡路径</span>

<span class="c1">//获取SD卡剩余空间－－查看Android源码</span>
<span class="n">File</span> <span class="n">path</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageDirectory</span><span class="o">();</span>
<span class="n">StatFs</span> <span class="n">stat</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">StatFs</span><span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">getPath</span><span class="o">());</span>
<span class="kt">long</span> <span class="n">blockSize</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="na">getBlockSize</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">totalBlocks</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="na">getBlockCount</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">avialableBlocks</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="na">getAvailableBlocks</span><span class="o">();</span>

<span class="n">String</span> <span class="n">size</span> <span class="o">=</span> <span class="n">Formatter</span><span class="o">.</span><span class="na">formatFileSize</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">avialableBlocks</span> <span class="o">*</span> <span class="n">blockSize</span><span class="o">);</span>
</pre></div>