<div class="highlight"><pre><span class="n">View</span> <span class="n">popup_view</span> <span class="o">=</span> <span class="n">View</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">SoftwareManagerActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">software_manager_popup_item</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>

<span class="n">popupWindow</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">PopupWindow</span><span class="o">(</span><span class="n">popup_view</span><span class="o">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">);</span>
<span class="n">popupWindow</span><span class="o">.</span><span class="na">showAsDropDown</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">UnitUtils</span><span class="o">.</span><span class="na">dip2px</span><span class="o">(</span><span class="n">SoftwareManagerActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="mi">50</span><span class="o">),</span> <span class="n">UnitUtils</span><span class="o">.</span><span class="na">dip2px</span><span class="o">(</span><span class="n">SoftwareManagerActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="o">-</span><span class="mi">70</span><span class="o">));</span>
<span class="n">popupWindow</span><span class="o">.</span><span class="na">setOutsideTouchable</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

<span class="k">if</span><span class="o">(</span><span class="n">position</span> <span class="o">&lt;</span> <span class="n">sysAppInfoList</span><span class="o">.</span><span class="na">size</span><span class="o">()){</span>
    <span class="n">clickedAppInfo</span> <span class="o">=</span> <span class="n">sysAppInfoList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">position</span><span class="o">);</span>
<span class="o">}</span><span class="k">else</span><span class="o">{</span>
    <span class="n">clickedAppInfo</span> <span class="o">=</span> <span class="n">userAppInfoList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">position</span> <span class="o">-</span> <span class="n">sysAppInfoList</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
<span class="o">}</span>

<span class="c1">//设置卸载,运行,分享点击事件</span>
<span class="n">View</span> <span class="n">iv_uninstall</span> <span class="o">=</span> <span class="n">popup_view</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">iv_uninstall</span><span class="o">);</span>
<span class="n">iv_uninstall</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nf">PopupWindowOnClickListener</span><span class="o">());</span>
<span class="n">View</span> <span class="n">iv_run</span> <span class="o">=</span> <span class="n">popup_view</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">iv_run</span><span class="o">);</span>
<span class="n">iv_run</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nf">PopupWindowOnClickListener</span><span class="o">());</span>
<span class="n">View</span> <span class="n">iv_share</span> <span class="o">=</span> <span class="n">popup_view</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">iv_share</span><span class="o">);</span>
<span class="n">iv_share</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nf">PopupWindowOnClickListener</span><span class="o">());</span>
</pre></div>